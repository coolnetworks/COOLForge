{
  "$schema": "./custom-fields.schema.json",
  "version": "2026.01.13",
  "description": "COOLForge custom field definitions for Level.io",
  "setup": {
    "prerequisites": [
      "Level.io API key with 'Custom Fields' permission (get from https://app.level.io/api-keys)",
      "Your company/MSP name for the scratch folder path",
      "(If using private repo) GitHub Personal Access Token with 'Contents' read permission - create at github.com/settings/tokens"
    ],
    "description": "This wizard creates and configures custom fields in your Level.io account. Have the information above ready before starting.",
    "notes": [
      "NEW ACCOUNTS: If you have a new Level.io account, API access may need to be enabled by Level.io support before you can use the API. Contact support if you receive connection errors."
    ]
  },
  "fieldGroups": {
    "level_api": {
      "displayName": "Level.io API",
      "description": "These fields enable Level.io API automation (wake devices, run scripts across folders, etc.)",
      "prerequisites": [
        "A second Level.io API key for scripts to use (can be the same as setup, but recommended to create a dedicated one)"
      ]
    },
    "screenconnect": {
      "displayName": "ScreenConnect",
      "description": "These fields enable ScreenConnect (ConnectWise Control) integration for remote access management.",
      "prerequisites": [
        "Your ScreenConnect server URL (e.g., support.yourcompany.com)",
        "ScreenConnect instance ID (found in ScreenConnect admin settings) - for whitelisting scripts",
        "(Optional) ScreenConnect API credentials if using automation features"
      ]
    },
    "huntress": {
      "displayName": "Huntress",
      "description": "These fields enable automated Huntress agent deployment and management.",
      "prerequisites": [
        "Huntress account key (from Huntress dashboard > Agents > Deploy)",
        "Huntress organization key (from Huntress dashboard > Agents > Deploy)"
      ]
    },
    "unchecky": {
      "displayName": "Unchecky",
      "description": "These fields enable automated Unchecky deployment using the 5-tag policy model. Tags override custom field policy.",
      "prerequisites": [
        "Download Unchecky installer from https://www.fosshub.com/Unchecky.html",
        "Host the installer on a publicly accessible URL (S3, Azure Blob, web server, etc.)"
      ]
    },
    "technician_alerts": {
      "displayName": "Technician Alerts",
      "description": "These fields enable the technician alert notification system. Alerts appear on technician workstations tagged with the technician emoji.",
      "prerequisites": [
        "Tag technician workstations with the technician emoji tag in Level.io"
      ]
    },
    "debugging": {
      "displayName": "Debugging",
      "description": "These fields enable verbose debug output for troubleshooting COOLForge scripts.",
      "prerequisites": []
    }
  },
  "fields": {
    "core": [
      {
        "name": "coolforge_msp_scratch_folder",
        "description": "Persistent storage folder for MSP scripts and libraries (default: C:\\ProgramData\\COOLForge)",
        "legacyNames": ["msp_scratch_folder"],
        "adminOnly": false,
        "required": true,
        "prompt": "Where should COOLForge store scripts and libraries on endpoints?"
      },
      {
        "name": "coolforge_ps_module_library_source",
        "description": "URL to download COOLForge-Common.psm1 library (leave empty for official repo)",
        "legacyNames": ["ps_module_library_source"],
        "adminOnly": false,
        "required": false,
        "prompt": "Custom library URL (leave empty to use official COOLForge repo)"
      },
      {
        "name": "coolforge_pin_psmodule_to_version",
        "description": "Pin scripts to a specific version tag (e.g., v2025.12.29)",
        "legacyNames": ["pin_psmodule_to_version"],
        "adminOnly": false,
        "required": false,
        "prompt": "Pin to a specific version? (leave empty for latest)"
      },
      {
        "name": "coolforge_pat",
        "description": "GitHub Personal Access Token for private repositories. Required if hosting COOLForge scripts in a private GitHub repo. Create at github.com/settings/tokens with 'repo' scope (read access). Token is stored as admin-only field so it's hidden from non-admin users.",
        "legacyNames": [],
        "adminOnly": true,
        "required": false,
        "prompt": "GitHub PAT for private repo access (leave empty if using public repo)",
        "help": "Create a fine-grained PAT at github.com/settings/tokens with read-only 'Contents' permission for your repo"
      },
      {
        "name": "coolforge_nosleep_duration_min",
        "description": "Duration in minutes to prevent device from sleeping (default: 60)",
        "legacyNames": [],
        "adminOnly": false,
        "required": false,
        "default": "60",
        "prompt": "How long should NoSleep scripts keep devices awake? (minutes)"
      }
    ],
    "level_api": [
      {
        "name": "apikey",
        "description": "Level.io API key for automation scripts (admin-only)",
        "legacyNames": [],
        "adminOnly": true,
        "required": false,
        "prompt": "Level.io API key for script automation"
      }
    ],
    "screenconnect": [
      {
        "name": "screenconnect_instance_id",
        "description": "Your MSP's ScreenConnect instance ID for whitelisting",
        "legacyNames": ["screenconnect_instance"],
        "adminOnly": true,
        "required": false,
        "prompt": "ScreenConnect instance ID (for RAT whitelisting)"
      },
      {
        "name": "screenconnect_baseurl",
        "description": "Your ScreenConnect server URL (e.g., https://support.example.com)",
        "legacyNames": [],
        "adminOnly": false,
        "required": false,
        "prompt": "ScreenConnect server URL (e.g., support.yourcompany.com)"
      },
      {
        "name": "screenconnect_api_user",
        "description": "ScreenConnect API username for automation",
        "legacyNames": [],
        "adminOnly": true,
        "required": false,
        "prompt": "ScreenConnect API username (optional)"
      },
      {
        "name": "screenconnect_api_password",
        "description": "ScreenConnect API password for automation",
        "legacyNames": [],
        "adminOnly": true,
        "required": false,
        "prompt": "ScreenConnect API password (optional)"
      },
      {
        "name": "is_screenconnect_server",
        "description": "Set to 'true' on devices hosting ScreenConnect server",
        "legacyNames": [],
        "adminOnly": false,
        "required": false
      },
      {
        "name": "screenconnect_device_url",
        "description": "Per-device ScreenConnect URL (populated automatically by scripts)",
        "legacyNames": ["screenconnect_url"],
        "adminOnly": false,
        "required": false,
        "autoCreate": true
      }
    ],
    "huntress": [
      {
        "name": "huntress_account_key",
        "description": "Huntress account key for agent deployment",
        "legacyNames": [],
        "adminOnly": true,
        "required": false,
        "prompt": "Huntress account key (from Dashboard > Agents > Deploy)"
      },
      {
        "name": "huntress_organization_key",
        "description": "Huntress organization key for agent deployment",
        "legacyNames": [],
        "adminOnly": true,
        "required": false,
        "prompt": "Huntress organization key (from Dashboard > Agents > Deploy)"
      },
      {
        "name": "huntress_tags",
        "description": "Comma-separated tags to apply to Huntress agent",
        "legacyNames": [],
        "adminOnly": false,
        "required": false,
        "prompt": "Default Huntress tags (comma-separated, optional)"
      }
    ],
    "unchecky": [
      {
        "name": "policy_unchecky",
        "description": "Default Unchecky policy: install, remove, pin, or empty. Tags override this value.",
        "legacyNames": [],
        "adminOnly": false,
        "required": false,
        "prompt": "Default Unchecky policy (install/remove/pin/empty)"
      },
      {
        "name": "policy_unchecky_url",
        "description": "URL to download Unchecky installer. Required for installation. Get installer from https://www.fosshub.com/Unchecky.html and host it yourself.",
        "legacyNames": [],
        "adminOnly": false,
        "required": true,
        "prompt": "URL to your hosted Unchecky installer (required)"
      }
    ],
    "technician_alerts": [
      {
        "name": "coolforge_technician_alerts",
        "description": "JSON array of pending alerts for technicians (managed by scripts). Technician workstations are identified by the technician emoji tag.",
        "legacyNames": [],
        "adminOnly": false,
        "required": false,
        "autoCreate": true
      }
    ],
    "debugging": [
      {
        "name": "debug_scripts",
        "description": "Enable verbose debug output in COOLForge scripts. Set to 'true' to show all variables, tags, policy resolution, and diagnostic information.",
        "legacyNames": [],
        "adminOnly": false,
        "required": false,
        "prompt": "Enable debug output in scripts? (true/false)"
      }
    ]
  }
}
